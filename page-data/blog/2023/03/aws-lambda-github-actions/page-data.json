{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2023/03/aws-lambda-github-actions/","result":{"data":{"site":{"siteMetadata":{"title":"Code Your Future | Preston Wallace | Dev Rocket"}},"markdownRemark":{"id":"6e46d4b9-d47a-54c0-9d03-dae136f65080","excerpt":"Writing your first AWS Lambda function is a great way to get started with serverless computing. However, deploying your function can be a bit tricky. In thisâ€¦","html":"<p>Writing your first AWS Lambda function is a great way to get started with serverless computing. However, deploying your function can be a bit tricky. In this article, we'll walk through the process of deploying your first Lambda function using GitHub Actions.</p>\n<h2 id=\"step-1-create-a-new-lambda-function\" style=\"position:relative;\"><a href=\"#step-1-create-a-new-lambda-function\" aria-label=\"step 1 create a new lambda function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Create a New Lambda Function</h2>\n<p>To get started, log in to your AWS console and navigate to the Lambda service. From there, you can create a new function by clicking the \"Create function\" button. Select the \"Author from scratch\" option and provide a name for your function.</p>\n<p>Next, you'll need to choose a runtime for your function. In this example, we'll use Node.js. Once you've selected your runtime, click the \"Create function\" button to create your new Lambda function.</p>\n<h2 id=\"step-2-write-your-function-code\" style=\"position:relative;\"><a href=\"#step-2-write-your-function-code\" aria-label=\"step 2 write your function code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Write Your Function Code</h2>\n<p>Now that you've created your Lambda function, you can start writing your function code. In this example, we'll write a simple function that takes two numbers as input and returns their sum. Here's the code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">handler</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> num1 <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>num1<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> num2 <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>num2<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> sum <span class=\"token operator\">=</span> num1 <span class=\"token operator\">+</span> num2<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> sum<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Save this code as a file called \"index.js\".</p>\n<h2 id=\"step-3-create-a-deployment-package\" style=\"position:relative;\"><a href=\"#step-3-create-a-deployment-package\" aria-label=\"step 3 create a deployment package permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Create a Deployment Package</h2>\n<p>To deploy your Lambda function, you'll need to create a deployment package that includes your function code and any dependencies it has. To do this, create a new folder and copy your \"index.js\" file into it. Then, run the following command to install the required dependencies:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> aws-sdk</code></pre></div>\n<p>Finally, create a ZIP archive of the entire folder.</p>\n<h2 id=\"step-4-create-a-github-repository\" style=\"position:relative;\"><a href=\"#step-4-create-a-github-repository\" aria-label=\"step 4 create a github repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Create a GitHub Repository</h2>\n<p>Next, you'll need to create a new GitHub repository to store your Lambda function code. Once you've created your repository, clone it to your local machine.</p>\n<h2 id=\"step-5-create-a-github-actions-workflow\" style=\"position:relative;\"><a href=\"#step-5-create-a-github-actions-workflow\" aria-label=\"step 5 create a github actions workflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 5: Create a GitHub Actions Workflow</h2>\n<p>To deploy your Lambda function using GitHub Actions, you'll need to create a new workflow file. Create a new file in your repository called \".github/workflows/deploy.yml\" and add the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy Lambda Function\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> main\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout code\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Configure AWS credentials\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>actions/configure<span class=\"token punctuation\">-</span>aws<span class=\"token punctuation\">-</span>credentials@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">aws-access-key-id</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.AWS_ACCESS_KEY_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">aws-secret-access-key</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.AWS_SECRET_ACCESS_KEY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">aws-region</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>east<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy function\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          aws lambda update-function-code \\\n            --function-name my-function \\\n            --zip-file fileb://deployment-package.zip</span></code></pre></div>\n<p>This workflow will trigger a deployment every time a push is made to the main branch of your repository. It will first check out your code, then configure your AWS credentials using GitHub Secrets, and finally deploy your function by uploading your deployment package to your Lambda function.</p>\n<h2 id=\"step-6-add-github-secrets\" style=\"position:relative;\"><a href=\"#step-6-add-github-secrets\" aria-label=\"step 6 add github secrets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 6: Add GitHub Secrets</h2>\n<p>To securely store your AWS credentials, you'll need to add them as secrets in your GitHub repository. Navigate to your repository settings, click on \"Secrets\", and then click the \"New repository secret\" button. Add two secrets: \"AWS_ACCESS_KEY_ID\" and \"AWS_SECRET_ACCESS_KEY\", and provide their respective values.</p>\n<h2 id=\"step-7-commit-and-push-your-changes\" style=\"position:relative;\"><a href=\"#step-7-commit-and-push-your-changes\" aria-label=\"step 7 commit and push your changes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 7: Commit and Push Your Changes</h2>\n<p>Now that you've written your function code, created a deployment package, and set up your GitHub Actions workflow, it's time to commit and push your changes to your repository. Once your changes are pushed, GitHub Actions will automatically trigger a deployment of your Lambda function.</p>\n<p>Congrats! You've successfully deployed your first Lambda function using GitHub Actions!</p>","frontmatter":{"title":"Deploy Your First AWS Lambda Function with GitHub Actions","date":"March 16, 2023","description":"A Step-by-Step Guide to deploying to AWS Lambda - with Code Samples!","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#181818","images":{"fallback":{"src":"/static/3757f15d4673214c87932fe5047af38b/f7f5e/header.png","srcSet":"/static/3757f15d4673214c87932fe5047af38b/ce8ad/header.png 225w,\n/static/3757f15d4673214c87932fe5047af38b/2db5a/header.png 450w,\n/static/3757f15d4673214c87932fe5047af38b/f7f5e/header.png 900w","sizes":"(min-width: 900px) 900px, 100vw"},"sources":[{"srcSet":"/static/3757f15d4673214c87932fe5047af38b/71a10/header.webp 225w,\n/static/3757f15d4673214c87932fe5047af38b/901f1/header.webp 450w,\n/static/3757f15d4673214c87932fe5047af38b/4ffff/header.webp 900w","type":"image/webp","sizes":"(min-width: 900px) 900px, 100vw"}]},"width":900,"height":600}}},"type":null,"youTubeVideo":null}},"previous":{"fields":{"slug":"/blog/2023/02/typescript-unleash/"},"frontmatter":{"title":"TypeScript - Unleashing the Power of JavaScript"}},"next":{"fields":{"slug":"/blog/2023/04/typescript-interfaces/"},"frontmatter":{"title":"Harnessing the Power of TypeScript Interfaces - A Guide for Developers"}}},"pageContext":{"id":"6e46d4b9-d47a-54c0-9d03-dae136f65080","previousPostId":"63da6e7d-cad6-5aad-a421-1e44a0a080d5","nextPostId":"ce7f07a4-fd7d-540c-bd6b-452dfb98774a"}},"staticQueryHashes":["2841359383","2944715102"],"slicesMap":{}}